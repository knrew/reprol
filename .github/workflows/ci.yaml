name: CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  schedule:
    - cron: "0 0 1 * *"

env:
  CARGO_TERM_COLOR: always
  CARGO_INCREMENTAL: 0

jobs:
  lint:
    uses: ./.github/workflows/lint.yaml
    with:
      rust_toolchain: "1.70.0"
 
  lint-stable:
    uses: ./.github/workflows/lint.yaml
    with:
      rust_toolchain: "stable"

  test:
    uses: ./.github/workflows/test.yaml
    with:
      rust_toolchain: "1.70.0"

  test-stable:
    uses: ./.github/workflows/test.yaml
    with:
      rust_toolchain: "stable"

  deploy-docs:
    uses: ./.github/workflows/deploy_docs.yaml
    with: 
      rust_toolchain: "stable"
